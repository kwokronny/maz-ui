import{d as G,e as q,f as n,w as x,n as h,o as d,c as y,G as w,H as M,m as g,a as b,B as S,t as Q,x as W,z as J,A as K,k as R,s as U}from"./framework.0IHa-SMz.js";import{h as i,O as T,Q as X,T as Y}from"./theme.R_7mmwxo.js";const Z={class:"m-picker-time__column__items"},E=G({__name:"MazPickerTime",props:{modelValue:{type:[String,Object],default:void 0},calendarDate:{type:String,required:!0},formatterOptions:{type:Object,required:!0},locale:{type:String,required:!0},color:{type:String,required:!0},isOpen:{type:Boolean,required:!0},hasDate:{type:Boolean,required:!0},minuteInterval:{type:Number,required:!0},disabledHours:{type:Array,default:void 0},format:{type:String,required:!0},isHour12:{type:Boolean,required:!0},minDate:{type:String,default:void 0},maxDate:{type:String,default:void 0},disabled:{type:Boolean,required:!0}},emits:["update:model-value"],setup(v,{emit:$}){const s=v,z=e=>{if(!s.disabledHours)return e;const t=Array.from({length:24},(a,o)=>o).filter(a=>{var o;return!((o=s.disabledHours)!=null&&o.includes(a))||!0}),r=T(t,e);return r!==e&&B("hour",i(u.value).set("hour",r)),r},A=$,l=q(),c=q(),p=n(()=>typeof u.value=="string"?z(i(u.value).get("hour")):void 0),P=n(()=>typeof u.value=="string"?T(H.value.map(({value:e})=>e.get("minute")),i(u.value).get("minute")):void 0),C=e=>{if(s.isHour12){const r=_.value==="pm"?e+12:e;return r===12?0:r===24?12:r}else return e},N=n(()=>Array.from({length:s.isHour12?12:24},(e,t)=>t).map(e=>{const t=e+(s.isHour12?1:0),r=C(t),a=i(u.value).set("hour",r),o=j(r)||(s.minDate&&u.value?i(s.minDate).isAfter(a,"hour"):!1)||(s.maxDate&&u.value?i(s.maxDate).isBefore(a,"hour"):!1);return{label:`${t<10?"0":""}${t}`,value:i(u.value).set("hour",r),isDisabled:o}})),H=n(()=>{const e=Math.floor(60/s.minuteInterval)-0;return Array.from({length:e},(t,r)=>r*s.minuteInterval).map(t=>{const r=i(u.value).set("minute",t),a=(s.minDate&&u.value?i(s.minDate).isAfter(r,"minute"):!1)||(s.maxDate&&u.value?i(s.maxDate).isBefore(r,"minute"):!1);return{label:`${t<10?"0":""}${t}`,value:r,isDisabled:a}})}),_=n(()=>typeof p.value=="number"?p.value>=12?"pm":"am":void 0),O=n(()=>s.isHour12?[{label:"AM",value:"am"},{label:"PM",value:"pm"}]:[]),V=n(()=>{const e=[{identifier:"hour",values:N.value},{identifier:"minute",values:H.value}];return s.isHour12&&e.push({identifier:"ampm",values:O.value}),e}),u=n({get:()=>s.modelValue,set:e=>{A("update:model-value",e)}});x(()=>s.isOpen,async e=>{var t;if(e){if(await h(),l.value){const r=l.value.querySelector(".m-picker-time__column .m-btn"),a=r==null?void 0:r.offsetHeight,m=((t=l.value)==null?void 0:t.offsetHeight)/2-a/2;c.value=m/16}k(!1)}},{immediate:!0}),x(()=>s.modelValue,async(e,t)=>{e!==t&&(await h(),k(!0))},{immediate:!0});const k=e=>{f("hour",e),f("minute",e),s.isHour12&&f("ampm",e)},j=e=>(s.disabledHours&&s.disabledHours.includes(e))??!1,D=(e,t)=>t==="am"||t==="pm"?_.value===t:e==="hour"?p.value===t.get(e):e==="minute"?P.value===t.get(e):!1,f=async(e,t=!0)=>{if(l.value){const r=l.value.querySelector(`.m-picker-time__column__${e}`),a=l.value.querySelector(`.m-picker-time__column__${e} .--is-selected`);c.value&&r&&a&&l.value&&(await h(),X(r,a,c.value*16,t))}},B=async(e,t)=>{const r=i(u.value);if(e==="hour"&&typeof t=="object"&&(u.value=r.set("hour",t.get("hour")).format()),e==="minute"&&typeof t=="object"){const a=r.set("minute",t.get("minute"));u.value=a.format()}if(e==="ampm"&&(_.value!==t||!p.value)&&(t==="am"&&(u.value=r.set("hour",r.get("hour")).subtract(12,"hour").format()),t==="pm")){const a=r.get("hour"),o=a+12>12&&a+12<24?a+12:a===0?12:a;u.value=r.set("hour",o).format()}await h(),f(e)};return(e,t)=>(d(),y("div",{ref_key:"MazPickerTime",ref:l,class:g(["m-picker-time",{"--has-date":v.hasDate}])},[(d(!0),y(w,null,M(V.value,({values:r,identifier:a},o)=>(d(),y("div",{key:o,class:g(["m-picker-time__column",[`m-picker-time__column__${a}`]])},[b("div",{style:S({height:`${c.value}rem`}),class:"m-picker-time__column__divider"},null,4),b("div",Z,[(d(!0),y(w,null,M(r,({value:m,label:I,isDisabled:L},F)=>(d(),Q(Y,{key:F,size:"xs",color:D(a,m)?v.color:"transparent",class:g({"--is-selected":D(a,m)}),disabled:L||v.disabled,type:"button",onClick:R(ee=>B(a,m),["stop"])},{default:W(()=>[K(J(I),1)]),_:2},1032,["color","class","disabled","onClick"]))),128))]),b("div",{style:S({height:`${c.value}rem`}),class:"m-picker-time__column__divider"},null,4)],2))),128))],2))}}),ae=U(E,[["__scopeId","data-v-a399bbf2"]]);export{ae as default};
